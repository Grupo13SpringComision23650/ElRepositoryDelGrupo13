<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Spring Banking</title>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css">
  <link href="../static/css/heroic-features.css" rel="stylesheet">

    
  <!-- Bootstrap core JavaScript -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" ></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" ></script>

  <!-- Custom styles for this template -->
  <link th:href="@{/css/heroic-features.css}" rel="stylesheet">
</head>

<body onload="showPopup()">

  <!-- Navigation -->
  <div th:insert="~{template_user.html :: menu}"></div>

  <!-- Page Content -->
<div class="container layout">
  <div class="card mb-4 layout1">
    <div class="card-body">
      <div class="row">
        <div class="col-lg-12">
          <h1 class="mt-4 mb-3">
            Spring Banking <small>Informacion de  Usuario: 
          </h1>
          <!-- HTML -->
          <div id="popup" class="popup">
            <span class="close" onclick="hidePopup()">&times;</span>
            <p th:text="${successMessage}">Cargado correctamente</p>
          </div>
        </div>
      </div>
    </div>
  </div>

    <form class="row"  th:action="@{/update}" method="post">

      <div class="col-1">
        <label for="id">ID:</label>
        <input type="text" class="form-control" name="id" readonly th:value="${user.id}">
      </div>
      <div class="col-5">
        <label for="nameUser">Nombres:</label>
        <input type="text" class="form-control" name="nameUser" placeholder="Ingrese su"  required th:value="${user.nameUser}">
      </div>
      <div class="col-6">
        <label for="address">Domicilio:</label>
        <input type="text" class="form-control" name="address" placeholder="domicilio completo" required th:value="${user.address}">
      </div>
      <div class="col-2">
        <label for="password">Contraseña</label>
        <input type="password" class="form-control" name="password" placeholder="contraseña" required th:value="${user.password}">
      </div>
      <div class="col-3">
        <label for="dni">D.N.I Nro.:</label>
        <input type="text" class="form-control" name="dni" placeholder="D.N.I" readonly th:value="${user.dni}">
      </div>
      <div class="col-2">
        <label for="birthday">Fecha Cumpleaños:</label>
        <input type="text" class="form-control" name="birthday" placeholder="Dia/Mes/Año" required th:value="${user.birthday}">
      </div>
      <div class="col-3">
        <label for="email">Email:</label>
        <input type="email" class="form-control" name="email" placeholder="email" required th:value="${user.email}">
      </div>
      <br>
      <div class="col-2">
        <label>&nbsp; </label>
        <input type="submit" value="Actualizar" class="btn btn-success form-control">
      </div><br>    
    </form><br>
    <!-- ***************************************** --> 
    <!-- Lista de cuentas de usuario -->     
    <div class="card mb-4 layout1">
      <div class="card-body">
        <div class="row">
          <div class="col-lg-12">
            <table class="table layout1 text-light">
              <thead>
              <tr>
                <th scope="col">Id</th>
                <th scope="col">Tipo de cuenta</th>
                <th scope="col">CBU</th>
                <th scope="col">Alias</th>
                <th scope="col">Saldo</th>
                <th scope="col">Activa</th>
                <th scope="col">Creada</th>
                <th scope="col">Actualizada</th>
              </tr>
              </thead>
              <tbody>
              <tr th:each="account : ${user.accountsDtos}"> 
                <td th:text="${account.id}">1</td>
                <td th:text="${account.type}" >Caja ahorro</td>
                <td th:text="${account.cbu}">3098453218</td>
                <td th:text="${account.alias}">mono.titi.pequeño</td>
                <td th:text="${account.amount}">0</td>
                <td th:text="${account.enabled}">0</td>
                <td th:text="${#temporals.format(account.created_at, 'dd/MM/yyyy')}">25-10-2023</td>
                <td th:text="${#temporals.format(account.updated_at, 'dd/MM/yyyy')}">25-10-2023</td>   
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div><br><br><br><br><br>


</div><!-- /.container -->

<!-- Footer -->
<footer class="py-5 bg-dark text-light" >
    <div class="container">
        <p class="m-0 text-center">Copyright &copy; Spring Banking 2023</p>
    </div>
</footer>


    <script>
    function showPopup() {
        var popup = document.getElementById("popup");
        popup.style.display = "block";
        setTimeout(function() {
            popup.style.display = "none";
        }, 5000); // Incrementa el tiempo en milisegundos para mostrar el pop-up antes de ocultarlo automáticamente (en este caso, 5000 ms = 5 segundos)
    }

    function hidePopup() {
        var popup = document.getElementById("popup");
        popup.style.display = "none";
    }

      </script>



</body>
</html>